var flag=0;function getSignInstance(t){return flag++,new Promise(function(n,e){var i;1===flag?getSign().then(function(){t=setUrl(t),n(t)}):i=setInterval(function(){window.SIGN&&window.NbaDeviceID&&(clearInterval(i),t=setUrl(t),n(t))},1e3)})}function getSign(){return new Promise((e,n)=>{var i,t;"undefined"==typeof Go?new Promise(function(n,e){var i=document.createElement("script");i.onload=n,i.onerror=function(){e("Failed to load the script")},i.async=!0,i.src="//res.nba.cn/static/scripts/utils/md5.js",document.head.appendChild(i)}).then(function(){window.SIGN=!0,window.ChinaNba={AppKey:"tiKB2tNdncnZFPOi",AppVersion:"1.0.0",token:"",Sign:function(n,e,i,t,o,a,r,c){return hex_md5("app_key="+ChinaNba.AppKey+"&app_version=1.0.0&device_id="+e+"&install_id="+i+"&network="+t+"&os_type="+o+"&os_version="+a+"&channel=''&t="+r)}}}):((i=new XMLHttpRequest).open("GET","//res.nba.cn/static/scripts/sign_utils/libnba.wasm"),i.responseType="arraybuffer",i.send(),t=new Go,i.onload=function(){var n=i.response;WebAssembly.instantiate(n,t.importObject).then(function(n){t.run(n.instance),window.SIGN=n.instance,console.log("getSign__signInstance::",window.SIGN),e()})})})}function setUrl(n){var e=navigator.appName,i=window.NbaDeviceID,e=(void 0===window.NbaDeviceID&&(i=e),(new Date).getTime()),t="202111201544",o=ChinaNba.Sign("725e2cd772f992a021ea8b126449805c51b1c3d467cba819a329829a59d2aa24",i,t,"wifi","3","10.0",e.toString(),"''"),t="app_key="+ChinaNba.AppKey+"&os_type=3&os_version=10.0&app_version="+ChinaNba.AppVersion+"&install_id="+t+"&network=wifi&t="+e+"&device_id="+i+"&channel=";return n=(n=n&&(-1===n.indexOf("?")?n+"?"+t:n+"&"+t))?n+"&sign="+o:""}function getDeviceID(){new Promise(function(n,e){var i=document.createElement("script");i.onload=n,i.onerror=function(){e("Failed to load the script")},i.async=!0,i.src="//res.nba.cn/static/scripts/fp.min.js",document.head.appendChild(i)}).then(function(){return FingerprintJS.load()}).then(function(n){return n.get()}).then(function(n){window.NbaDeviceID=n.visitorId,console.log("NbaDeviceID:",window.NbaDeviceID)}).catch(function(n){console.error(n)})}getSignInstance(),getDeviceID();